name: structure-enforcement

on: [push, pull_request]

permissions:
  contents: read

jobs:
  enforce:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Enforce boundaries
        run: |
          if find . -type f \( -name "*.py" -o -name "*.js" -o -name "*.sh" \); then
            echo "Executable files detected. Forbidden."
            exit 1
          fi

          if [ "$(ls -A implementations 2>/dev/null | wc -l)" -gt 1 ]; then
            echo "implementations/ must remain empty."
            exit 1
          fi
