name: structure-enforcement

on: [push, pull_request]

permissions:
  contents: read

jobs:
  enforce:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Enforce boundaries
        run: |
          if find . -type f \( -name "*.py" -o -name "*.js" -o -name "*.sh" \) -print -quit | grep -q .; then
            echo "Executable files detected. Forbidden."
            exit 1
          fi

          if [ -d implementations ] && find implementations -mindepth 1 -not -name README.md -print -quit | grep -q .; then
            echo "implementations/ must remain empty (README.md placeholder permitted)."
            exit 1
          fi
